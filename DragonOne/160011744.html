

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=&#34;auto&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="https://img-blog.csdnimg.cn/a458bf114f6f4912953f8b73eab00580.png">
  <link rel="icon" href="https://img-blog.csdnimg.cn/a458bf114f6f4912953f8b73eab00580.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  
    <meta name="description" content="墨水记忆">
  
  <meta name="author" content="DragonOne">
  <meta name="keywords" content="墨水记忆,墨水的记忆,最好的记忆不如最淡的墨水,DragonOne,tothefor,tothefor.com,www.ththefor.com,个人博客,Java,SpringBoot,Vue3,Vite2">
  
    <meta name="baidu-site-verification" content="code-A374Jvt3Q0" />
  
  <title>MongoDB学习笔记（一）入门基础 - 墨水记忆</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.4.0/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  



<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->

  
<link rel="stylesheet" href="/css/macpanel.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"tothefor.com","root":"/","version":"1.8.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"onlypost":false},"web_analytics":{"enable":true,"baidu":"952d55c20fecac468ce267fb5ef10df9","google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":"jx7bocft2eNXc79VRkkkNmhT-gzGzoHsz","app_key":"tL3DrseUcom3imP7y6HAnTfh","server_url":null}}};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="墨水记忆" type="application/atom+xml">
</head>



<body><!-- hexo injector body_begin start --><div id="web_bg"></div><!-- hexo injector body_begin end -->
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>墨水记忆</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                友情链接
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="iconfont icon-books"></i>
                文档
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                
                  
                  
                  
                  <a class="dropdown-item" href="/databases/">
                    
                    资料库
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/javaProject/">
                    
                    Java项目
                  </a>
                
              </div>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/comment/">
                <i class="iconfont icon-comment"></i>
                留言板
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" href="javascript:">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('https://img-blog.csdnimg.cn/af560031e20c4a8f8d05ed9f18fe4ef3.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="MongoDB学习笔记（一）入门基础">
              
            </span>

            
              <div class="mt-3">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-author" aria-hidden="true"></i>
      DragonOne
    </span>
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2021-07-18 20:07" pubdate>
        July 18, 2021 pm
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      3.4k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      45
       分钟
    </span>
  

  
  
    
      <!-- 不蒜子统计文章PV -->
      <span id="busuanzi_container_page_pv" style="display: none">
        <i class="iconfont icon-eye" aria-hidden="true"></i>
        <span id="busuanzi_value_page_pv"></span> 次
      </span>
    
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    <!--动态线条背景-->
<!-- <script type="text/javascript"
color="220,220,220" opacity='0.7' zIndex="-2" count="200" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js">
</script> -->

    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">MongoDB学习笔记（一）入门基础</h1>
            
              <p class="note note-info">
                
                  本文最后更新于：December 3, 2021 pm
                
              </p>
            
            <div class="markdown-body">
              <p>MongoDB 是由C++语言编写的，是一个基于分布式文件存储的开源数据库系统。是一个面向文档存储的数据库，操作起来比较简单和容易。在高负载的情况下，添加更多的节点，可以保证服务器性能。MongoDB 旨在为WEB应用提供可扩展的高性能数据存储解决方案。将数据存储为一个文档，数据结构由键值(key=&gt;value)对组成。MongoDB 文档类似于 JSON 对象。字段值可以包含其他文档，数组及文档数组。</p>
<h1 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h1><h2 id="0-安装"><a href="#0-安装" class="headerlink" title="0.安装"></a>0.安装</h2><figure class="highlight java"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs java">brew tap mongodb/brew<br>brew install mongodb-community@<span class="hljs-number">4.2</span> <span class="hljs-comment">// @符号后面的 4.4 是最新版本号。</span><br><br>brew services start mongodb-community@<span class="hljs-number">4.2</span> <span class="hljs-comment">//启动</span><br>brew services stop mongodb-community@<span class="hljs-number">4.2</span> <span class="hljs-comment">//停止</span><br><br><span class="hljs-comment">//以下代码非需要 不必运行</span><br>mongod --config /usr/local/etc/mongod.conf --fork <span class="hljs-comment">//mongod 命令后台进程方式：</span><br>&gt; db.adminCommand(&#123; <span class="hljs-string">&quot;shutdown&quot;</span> : <span class="hljs-number">1</span> &#125;) <span class="hljs-comment">// 这种方式启动要关闭可以进入 mongo shell 控制台来实现：</span><br><br><span class="hljs-comment">//=====================================================</span><br><span class="hljs-comment">//2021/10/18再次安装使用记录</span><br>brew install mongodb-community<br><br>To have launchd start mongodb/brew/mongodb-community now and restart at login:<br>  brew services start mongodb/brew/mongodb-community <br>Or, <span class="hljs-keyword">if</span> you don<span class="hljs-string">&#x27;t want/need a background service you can just run:</span><br><span class="hljs-string">  mongod --config /usr/local/etc/mongod.conf</span><br><span class="hljs-string"></span><br><span class="hljs-string">brew services start mongodb/brew/mongodb-community //启动</span><br><span class="hljs-string">brew services stop  mongodb/brew/mongodb-community //关闭</span><br><span class="hljs-string">brew services restart mongodb/brew/mongodb-community //重启  </span><br><span class="hljs-string">mongo //命令窗口进入MongoDB</span><br></code></pre></div></td></tr></table></figure>

<p>Ubuntu20.04 安装见下一篇。</p>
<h3 id="0-1-MAC安装MongoDB"><a href="#0-1-MAC安装MongoDB" class="headerlink" title="0.1 MAC安装MongoDB"></a>0.1 MAC安装MongoDB</h3><blockquote>
<p>时间：2021/11/1<br>从上往下，逐个执行命令就可以安装好mongodb了。</p>
</blockquote>
<blockquote>
<ol>
<li>下载</li>
</ol>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash"><span class="hljs-comment"># 进入 /usr/local</span><br><span class="hljs-built_in">cd</span> /usr/<span class="hljs-built_in">local</span><br><br><span class="hljs-comment"># 下载</span><br>sudo curl -O https://fastdl.mongodb.org/osx/mongodb-osx-ssl-x86_64-4.0.9.tgz<br><br><span class="hljs-comment"># 解压</span><br>sudo tar -zxvf mongodb-osx-ssl-x86_64-4.0.9.tgz<br><br><span class="hljs-comment"># 重命名为 mongodb 目录</span><br><br>sudo mv mongodb-osx-x86_64-4.0.9/ mongodb<br></code></pre></div></td></tr></table></figure>

<blockquote>
<ol start="2">
<li>添加到 PATH 路径</li>
</ol>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash"><span class="hljs-comment"># 这种方式是当前这次运行的终端可以（即：临时的），一旦关了终端，必须要重新执行一遍此命令，才能在任意位置使用mongo命令进入mongodb。否则需要到/usr/local/mongodb/bin目录下执行./mongo后，才能进入MongoDB</span><br><span class="hljs-built_in">export</span> PATH=/usr/<span class="hljs-built_in">local</span>/mongodb/bin:<span class="hljs-variable">$PATH</span><br></code></pre></div></td></tr></table></figure>

<blockquote>
<ol start="3">
<li>创建data/db 和 logs</li>
</ol>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash"><span class="hljs-comment"># 创建一个数据库存储目录</span><br>sudo mkdir -p /usr/<span class="hljs-built_in">local</span>/mongodb/data/db<br>sudo mkdir -p /usr/<span class="hljs-built_in">local</span>/mongodb/logs<br>sudo touch /usr/<span class="hljs-built_in">local</span>/mongodb/logs/mongodb.log<br></code></pre></div></td></tr></table></figure>

<blockquote>
<ol start="4">
<li>后台启动</li>
</ol>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">sudo mongod --dbpath /usr/<span class="hljs-built_in">local</span>/mongodb/data/db/ --logpath /usr/<span class="hljs-built_in">local</span>/mongodb/logs/mongodb.log --logappend --port 27017 --bind_ip 0.0.0.0 --fork<br></code></pre></div></td></tr></table></figure>

<p>先执行：<code>export PATH=/usr/local/mongodb/bin:$PATH</code>，在执行：<code>sudo mongod --dbpath /usr/local/mongodb/data/db/ --logpath /usr/local/mongodb/logs/mongodb.log --logappend --port 27017 --bind_ip 0.0.0.0 --fork</code>。</p>
<blockquote>
<p>时间：2021/11/13 19:13:27</p>
</blockquote>
<p>启动MongoDB的方式：</p>
<figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> /usr/<span class="hljs-built_in">local</span>/mongodb/bin<br>./mongo<br></code></pre></div></td></tr></table></figure>

<p>另外一种，使用配置文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">配置文件位置：/usr/<span class="hljs-built_in">local</span>/mongodb/etc/mongodb.conf<br>内容：<br>dbpath=/usr/<span class="hljs-built_in">local</span>/mongodb/data/db<br>logpath=/usr/<span class="hljs-built_in">local</span>/mongodb/logs/mongodb.log<br>port=27017<br>bind_ip=0.0.0.0<br>fork=<span class="hljs-literal">true</span><br></code></pre></div></td></tr></table></figure>

<p>然后只需要在bin目录下，使用：</p>
<figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">./mongod --config /usr/<span class="hljs-built_in">local</span>/mongodb/etc/mongodb.conf<br></code></pre></div></td></tr></table></figure>

<blockquote>
<p>配置环境变量</p>
</blockquote>
<p>在<code>/etc/目录下的profile</code>中，添加：</p>
<figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash"><span class="hljs-built_in">export</span> PATH=/usr/<span class="hljs-built_in">local</span>/mongodb/bin:<span class="hljs-variable">$PATH</span><br></code></pre></div></td></tr></table></figure>
<p>保存后，执行<code>source profile</code>重新加载。然后在任何目录下都可以使用<code>mongo</code>启动MongoDB了。（但我自己不行。ε=(´ο｀*)))唉。每次都要进入<code>/etc</code>目录下执行<code>source profile</code>重新加载后，才可以使用<code>mongo</code>进入。）</p>
<h2 id="0-1-MongoDB与MySQL"><a href="#0-1-MongoDB与MySQL" class="headerlink" title="0.1 MongoDB与MySQL"></a>0.1 MongoDB与MySQL</h2><p><img src="https://img-blog.csdnimg.cn/2021071908485373.jpg" srcset="/img/loading.gif"></p>
<table>
<thead>
<tr>
<th align="center">MySQL</th>
<th align="center">MongoDB</th>
<th align="center">解释</th>
</tr>
</thead>
<tbody><tr>
<td align="center">database</td>
<td align="center">database</td>
<td align="center">数据库</td>
</tr>
<tr>
<td align="center">table</td>
<td align="center">collection</td>
<td align="center">数据表/集合</td>
</tr>
<tr>
<td align="center">row</td>
<td align="center">document</td>
<td align="center">数据记录行/文档</td>
</tr>
<tr>
<td align="center">column</td>
<td align="center">field</td>
<td align="center">数据字段/域</td>
</tr>
<tr>
<td align="center">index</td>
<td align="center">index</td>
<td align="center">索引</td>
</tr>
<tr>
<td align="center">table joins</td>
<td align="center">无</td>
<td align="center">表连接/MondoDB不支持</td>
</tr>
<tr>
<td align="center">无</td>
<td align="center">嵌入文档</td>
<td align="center">MongoDB通过嵌入式文档来替代多表连接</td>
</tr>
<tr>
<td align="center">primary key</td>
<td align="center">primary key</td>
<td align="center">主键。MongoDB自动将 _id 字段设置为主键</td>
</tr>
</tbody></table>
<h2 id="1-基础语法"><a href="#1-基础语法" class="headerlink" title="1.基础语法"></a>1.基础语法</h2><h3 id="1-1-创建、切换数据库（use）"><a href="#1-1-创建、切换数据库（use）" class="headerlink" title="1.1 创建、切换数据库（use）"></a>1.1 创建、切换数据库（use）</h3><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql">use name<br><span class="hljs-comment">/*实例*/</span><br>use loong<br></code></pre></div></td></tr></table></figure>
<ul>
<li><strong>⚠️注意：</strong> 如果数据库不存在，则创建数据库，否则切换到该数据库。<strong>如果创建了数据库，但没有插入数据，使用 <code>show dbs</code> 命令时，是看不见数据库的。</strong> 在 MongoDB 中，集合只有在内容插入后才会创建! 就是说，创建集合(数据表)后要再插入一个文档(记录)，集合才会真正创建。MongoDB 中默认的数据库为 test，如果你没有创建新的数据库，集合将存放在 test 数据库中</li>
</ul>
<h3 id="1-2-查看当前数据库（db）"><a href="#1-2-查看当前数据库（db）" class="headerlink" title="1.2 查看当前数据库（db）"></a>1.2 查看当前数据库（db）</h3><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql">db<br></code></pre></div></td></tr></table></figure>
<h3 id="1-3-查看所有数据库（show-dbs）"><a href="#1-3-查看所有数据库（show-dbs）" class="headerlink" title="1.3 查看所有数据库（show dbs）"></a>1.3 查看所有数据库（show dbs）</h3><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">show</span> dbs<br></code></pre></div></td></tr></table></figure>
<h3 id="1-4-插入数据"><a href="#1-4-插入数据" class="headerlink" title="1.4 插入数据"></a>1.4 插入数据</h3><p>使用IDEA连接MongoDB的，会显示 已被弃用。</p>
<figure class="highlight"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql">use loong<br>db.loong1.insert(&#123;&quot;name&quot;:&quot;dragonone&quot;&#125;) #在名为loong的数据库中，创建一个名为loong1的集合并插入数据。<br></code></pre></div></td></tr></table></figure>


<h3 id="1-5-删除数据库"><a href="#1-5-删除数据库" class="headerlink" title="1.5 删除数据库"></a>1.5 删除数据库</h3><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql">db.dropDatabase()<br></code></pre></div></td></tr></table></figure>
<ul>
<li>删除当前数据库，默认为test。</li>
</ul>
<h3 id="1-6-创建集合-数据表"><a href="#1-6-创建集合-数据表" class="headerlink" title="1.6 创建集合(数据表)"></a>1.6 创建集合(数据表)</h3><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql">db.createCollection(name,options)<br></code></pre></div></td></tr></table></figure>
<ul>
<li><p><code>name</code>：需要创建的集合名称。</p>
</li>
<li><p><code>options</code>：可选参数。指定有关内存大小及索引的选项。包括：<br><code>capped</code>：如果为true，则创建固定集合，且此时必须指定size参数。固定集合是指有着固定大小的集合，当达到最大值时，它会自动覆盖最早的文档。<br><code>size</code>：为固定集合指定一个最大值，即字节数。<br><code>max</code>：指定固定集合中包含文档的最大数量。</p>
</li>
</ul>
<p>在插入文档时，MongoDB 首先检查固定集合的 size 字段，然后检查 max 字段。</p>
<ul>
<li>实例</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"># 方法一<br>db.createCollection(&quot;test1&quot;,&#123;capped:true ,size:500,max:10&#125;)<br></code></pre></div></td></tr></table></figure>
<p>也可以不需要创建集合。当插入一些文档时，MongoDB 会自动创建集合。</p>
<figure class="highlight"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"># 方法二<br>db.test1.insert(&#123;&quot;name&quot;:&quot;abcdefg&quot;&#125;) # 在名为test1的集合中插入数据。<br></code></pre></div></td></tr></table></figure>


<h3 id="1-7-删除集合-数据表"><a href="#1-7-删除集合-数据表" class="headerlink" title="1.7 删除集合(数据表)"></a>1.7 删除集合(数据表)</h3><figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql">db.collection.drop() # 成功返回<span class="hljs-literal">true</span>，否则返回<span class="hljs-literal">false</span><br></code></pre></div></td></tr></table></figure>
<ul>
<li>实例</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql">use loong # 创建数据库<br>db.createCollection(&quot;test2&quot;) # 创建集合（数据表）test2<br><span class="hljs-keyword">show</span> tables # 输出集合（数据表） 使用 <span class="hljs-keyword">show</span> collections 更好<br>db.test2.drop() # 删除指定集合（数据表）<br></code></pre></div></td></tr></table></figure>

<h3 id="1-8-插入文档"><a href="#1-8-插入文档" class="headerlink" title="1.8 插入文档"></a>1.8 插入文档</h3><p>以下代码均在数据库：loong，集合名：tothe 中实现。</p>
<p><strong>必须先执行文档代码，才能在后面使用文档时不出错。</strong></p>
<figure class="highlight"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql">dotest=(&#123; # 文档1<br>   title: <span class="hljs-string">&#x27;测试数据&#x27;</span>,<br>    categoies: <span class="hljs-string">&#x27;sql&#x27;</span>,<br>    <span class="hljs-keyword">by</span>: <span class="hljs-string">&#x27;tothefor&#x27;</span>,<br>    url: <span class="hljs-string">&#x27;tothefor.com&#x27;</span>,<br>    tags: [<span class="hljs-string">&#x27;a&#x27;</span>,<span class="hljs-string">&#x27;b&#x27;</span>,<span class="hljs-string">&#x27;c&#x27;</span>]<br><br>&#125;);<br>testdo=(&#123; # 文档2<br>   title: <span class="hljs-string">&#x27;测试数据2&#x27;</span>,<br>    categoies: <span class="hljs-string">&#x27;sql2&#x27;</span>,<br>    <span class="hljs-keyword">by</span>: <span class="hljs-string">&#x27;tothefor2&#x27;</span>,<br>    url: <span class="hljs-string">&#x27;tothefor.com2&#x27;</span>,<br>    tags: [<span class="hljs-string">&#x27;a&#x27;</span>,<span class="hljs-string">&#x27;b&#x27;</span>,<span class="hljs-string">&#x27;c&#x27;</span>,<span class="hljs-string">&#x27;d&#x27;</span>]<br><br>&#125;);<br></code></pre></div></td></tr></table></figure>


<ul>
<li><strong>文档的数据结构和JSON基本一样。所有存储在集合中的数据都是BSON格式，BSON是一种类似JSON的二进制形式的存储格式。</strong>  <strong>文档就是一条数据。(自行理解)</strong></li>
</ul>
<h4 id="1-8-1-insert-和save"><a href="#1-8-1-insert-和save" class="headerlink" title="1.8.1 insert()和save()"></a>1.8.1 insert()和save()</h4><ul>
<li>区别：insert()方法:当插入数据时,已经存在的_id的数据,则mongodb会直接报错,并返回对应的_id。save()方法:当插入数据时,它会先去循环一遍集合中的所有数据,判断插入的数据的_id是否存在于集合中,如果不存在则会直接插入一条新的文档,如果存在,则会调用mongodb的update()方法,更新_id对应的数据(相当于覆盖该_id的文档内容)。</li>
</ul>
<blockquote>
<ol>
<li><code>insert()</code></li>
</ol>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"># 写法一<br>db.tothe.insert(dotest);<br><br># 写法二<br>db.tothe.insert(<br>    &#123;<br>        <span class="hljs-string">&#x27;title&#x27;</span>:<span class="hljs-string">&#x27;honfei&#x27;</span>,<br>        <span class="hljs-string">&#x27;by&#x27;</span>:<span class="hljs-string">&#x27;zhang&#x27;</span>,<br>        <span class="hljs-string">&#x27;url&#x27;</span>:<span class="hljs-string">&#x27;sssss&#x27;</span>,<br>        <span class="hljs-string">&#x27;tags&#x27;</span>:[<span class="hljs-string">&#x27;as&#x27;</span>,<span class="hljs-string">&#x27;sf&#x27;</span>]<br>    &#125;<br><br>);<br></code></pre></div></td></tr></table></figure>

<blockquote>
<ol start="2">
<li><code>save()</code></li>
</ol>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql">已废除。<br></code></pre></div></td></tr></table></figure>

<h4 id="1-8-2-insertOne-和insertMany"><a href="#1-8-2-insertOne-和insertMany" class="headerlink" title="1.8.2 insertOne()和insertMany()"></a>1.8.2 insertOne()和insertMany()</h4><blockquote>
<ol>
<li><code>insertOne()</code></li>
</ol>
</blockquote>
<p>向集合插入一个新文档（一条新数据）。</p>
<ul>
<li>用法</li>
</ul>
<p><strong>可以用 <code>db.tothe.find() </code>查看当前集合中的所有数据。</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"># 用法一<br>db.tothe.insertOne(<br>    dotest, # 文档名字，必须要加上逗号<br>	&#123; # 可以先不用管这个，不要也没有影响<br>		writeConcern:<br>	&#125;<br>	<br>);<br><br># 用法二<br>db.tothe.insertOne(<br>    &#123;<br>        &quot;name&quot;:<span class="hljs-string">&#x27;wefew&#x27;</span>,<span class="hljs-string">&#x27;title&#x27;</span>:<span class="hljs-string">&#x27;fweew&#x27;</span><br>    &#125;, # 逗号不能忘记<br>    <br>);<br></code></pre></div></td></tr></table></figure>

<blockquote>
<ol start="2">
<li><code>insertMany()</code></li>
</ol>
</blockquote>
<p>向集合中插入一个或多个文档。</p>
<ul>
<li>用法</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"># 写法一<br>db.tothe.insertMany(<br>    [dotest,testdo], # 不能忘记逗号，且必须在中括号内<br><br>);<br><br># 写法二<br>db.tothe.insertMany(<br>    [<br>    		# 文档<span class="hljs-number">1</span>（数据<span class="hljs-number">1</span>）<br>        &#123;<br>        <span class="hljs-string">&#x27;name&#x27;</span>:<span class="hljs-string">&#x27;peng&#x27;</span>,<span class="hljs-string">&#x27;title&#x27;</span>:<span class="hljs-string">&#x27;dddd&#x27;</span><br>        &#125;,<br>        # 文档<span class="hljs-number">2</span>（数据<span class="hljs-number">2</span>）<br>        &#123;<br>            <span class="hljs-string">&#x27;name&#x27;</span>:<span class="hljs-string">&#x27;sdfe&#x27;</span>,<span class="hljs-string">&#x27;title&#x27;</span>:<span class="hljs-string">&#x27;ding&#x27;</span>,<span class="hljs-string">&#x27;by&#x27;</span>:<span class="hljs-string">&#x27;ffwefe&#x27;</span><br>        &#125;<br>    ], # 逗号不能忘记<br><br>);<br><br></code></pre></div></td></tr></table></figure>

<blockquote>
<p><strong>参数说明</strong></p>
</blockquote>
<ul>
<li><p><code>document </code>：要写入的文档。该参数指要插入的一个或多个文档的数据，如果是一个文档，则该参数为一个json数据，若是多个文档，则该参数是多个json数据组成的数组。</p>
</li>
<li><p><code>writeConcern</code>：可选参数。写入策略，默认为 1，即要求确认写操作，0 是不要求。该参数指的是该次的插入操作的写入关注程度，其值为一个文档，表现为json数据。</p>
</li>
<li><p><code>ordered</code>：可选参数。指定是否按顺序写入，默认 true，按顺序写入。如果值为true，则将数组中文档的进行有序插入，如果一个文档发生错误，mongodb将返回，而无需处理数组中的剩余文档。如果false，执行无序插入，如果错误发生在某个文档中，则继续处理数组中的剩余文档。默认为true。</p>
</li>
</ul>
<ul>
<li>当向集合中插入文档时，如果没有给文档指定 _id 属性，则mongoDB数据库会默认自动为文档添加_id属性，并且该属性用来作为文档的唯一标识。这个是根据时间戳生成的。也可以直接调用 <code>ObjectId()</code>方法来随机建一个时间戳。</li>
</ul>
<ul>
<li>实际上，db.collection.insertOne()方法和db.collection.insertMany()方法都是对db.collection.insert()方法的拆分。db.collection.insertOne()方法和db.collection.insertMany()方法，语义上更加清晰，会告诉我们传几个文档对象，而db.collection.insert()方法则不明确，可以是一个文档对象，也可以是多个，总的来说，这三个方法本质上没多大区别。</li>
</ul>
<h3 id="1-9-删除文档"><a href="#1-9-删除文档" class="headerlink" title="1.9 删除文档"></a>1.9 删除文档</h3><h4 id="1-9-1-remove（已过时）"><a href="#1-9-1-remove（已过时）" class="headerlink" title="1.9.1 remove（已过时）"></a>1.9.1 remove（已过时）</h4><figure class="highlight"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"># 写法一<br>db.tothe.remove(<br>&#123;&#x27;name&#x27;:&#x27;peng&#x27;&#125;<br>	&#123;  # 可选参数<br><br>	&#125;<br><br>);<br><br># 写法二<br>db.tothe.remove(&#123;&#x27;name&#x27;:&#x27;peng&#x27;&#125;,1) # 只删除找到的第一条记录可以设置 justOne 为 1<br></code></pre></div></td></tr></table></figure>

<blockquote>
<p>参数说明：</p>
</blockquote>
<ul>
<li><p>query :（可选）删除的文档的条件。</p>
</li>
<li><p>justOne : （可选）如果设为 true 或 1，则只删除一个文档，如果不设置该参数，或使用默认值 false，则删除所有匹配条件的文档。</p>
</li>
<li><p>writeConcern :（可选）抛出异常的级别。</p>
</li>
</ul>
<h4 id="1-9-2-deleteMany-和deleteOne"><a href="#1-9-2-deleteMany-和deleteOne" class="headerlink" title="1.9.2 deleteMany()和deleteOne()"></a>1.9.2 deleteMany()和deleteOne()</h4><blockquote>
<ol>
<li>deleteMany()</li>
</ol>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql">db.tothe.deleteMany(&#123; status : &quot;A&quot; &#125;) # 删除 status 等于 A 的全部文档<br></code></pre></div></td></tr></table></figure>


<blockquote>
<ol start="2">
<li>deleteOne()</li>
</ol>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql">db.tothe.deleteOne( &#123; status: &quot;D&quot; &#125; ) # 删除 status 等于 D 的一个文档<br></code></pre></div></td></tr></table></figure>


<h3 id="1-10-更新文档"><a href="#1-10-更新文档" class="headerlink" title="1.10 更新文档"></a>1.10 更新文档</h3><h4 id="1-10-1-update-和save"><a href="#1-10-1-update-和save" class="headerlink" title="1.10.1 update()和save()"></a>1.10.1 update()和save()</h4><blockquote>
<ol>
<li>update()</li>
</ol>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql">db.tothe.update(<br>    &#123;&#x27;title&#x27;:&#x27;fweew&#x27;&#125;,<br>    &#123;$set:&#123;&#x27;title&#x27;:&#x27;dingeng&#x27;&#125;&#125;,<br>    &#123; # 参数<br>    	upsert:  ,<br>        multi: <span class="hljs-literal">true</span>,<br>    &#125;<br>);<br></code></pre></div></td></tr></table></figure>

<blockquote>
<p>参数说明：</p>
</blockquote>
<ul>
<li><p>query : update的查询条件，类似sql update查询内where后面的。</p>
</li>
<li><p>update : update的对象和一些更新的操作符（如$,$inc…）等，也可以理解为sql update查询内set后面的</p>
</li>
<li><p>upsert : 可选，这个参数的意思是，如果不存在update的记录，是否插入objNew,true为插入，默认是false，不插入。</p>
</li>
<li><p>multi : 可选，mongodb 默认是false,只更新找到的第一条记录，如果这个参数为true,就把按条件查出来多条记录全部更新。</p>
</li>
<li><p>writeConcern :可选，抛出异常的级别。</p>
</li>
</ul>
<blockquote>
<ol start="2">
<li>save()</li>
</ol>
</blockquote>
<p>save() 方法通过传入的文档来替换已有文档，_id 主键存在就更新，不存在就插入。</p>
<figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql">已废除。<br></code></pre></div></td></tr></table></figure>

<h4 id="1-10-2-updateOne-和updateMany"><a href="#1-10-2-updateOne-和updateMany" class="headerlink" title="1.10.2 updateOne()和updateMany()"></a>1.10.2 updateOne()和updateMany()</h4><blockquote>
<ol>
<li>updateOne()</li>
</ol>
</blockquote>
<p>向指定集合更新单个文档。</p>
<figure class="highlight"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql">db.tothe.updateOne(&#123;&quot;name&quot;:&quot;abc&quot;&#125;,&#123;$set:&#123;&quot;age&quot;:&quot;28&quot;&#125;&#125;)<br></code></pre></div></td></tr></table></figure>

<blockquote>
<ol start="2">
<li>updateMany()</li>
</ol>
</blockquote>
<p>向指定集合更新多个文档。</p>
<figure class="highlight"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql">db.tothe.updateMany(&#123;&quot;age&quot;:&#123;$gt:&quot;10&quot;&#125;&#125;,&#123;$set:&#123;&quot;status&quot;:&quot;xyz&quot;&#125;&#125;) # $gt 表示大于<br></code></pre></div></td></tr></table></figure>

<h3 id="1-11-查询文档"><a href="#1-11-查询文档" class="headerlink" title="1.11 查询文档"></a>1.11 查询文档</h3><p>条件语句表。</p>
<table>
<thead>
<tr>
<th align="center">操作</th>
<th align="center">格式</th>
<th align="center">示例</th>
</tr>
</thead>
<tbody><tr>
<td align="center">等于</td>
<td align="center">{&lt;key&gt;:&lt;value&gt;}</td>
<td align="center">db.col.find({“by”:”tototo”}).pretty()</td>
</tr>
<tr>
<td align="center">小于</td>
<td align="center">{&lt;key&gt;:{$lt:&lt;value&gt;}}</td>
<td align="center">db.col.find({“likes”:{$lt:50}}).pretty()</td>
</tr>
<tr>
<td align="center">小于等于</td>
<td align="center">{&lt;key&gt;:{$lte:&lt;value&gt;}}</td>
<td align="center">db.col.find({“likes”:{$lte:50}}).pretty()</td>
</tr>
<tr>
<td align="center">大于</td>
<td align="center">{&lt;key&gt;:{$gt:&lt;value&gt;}}</td>
<td align="center">db.col.find({“likes”:{$gt:50}}).pretty()</td>
</tr>
<tr>
<td align="center">大于等于</td>
<td align="center">{&lt;key&gt;:{$gte:&lt;value&gt;}}</td>
<td align="center">db.col.find({“likes”:{$gte:50}}).pretty()</td>
</tr>
<tr>
<td align="center">不等于</td>
<td align="center">{&lt;key&gt;:{$ne:&lt;value&gt;}}</td>
<td align="center">db.col.find({“likes”:{$ne:50}}).pretty()</td>
</tr>
</tbody></table>
<blockquote>
<ol>
<li>find()</li>
</ol>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql">db.tothe.find(query,projection)<br># query ：可选，使用查询操作符指定查询条件<br># projection ：可选，使用投影操作符指定返回的键。查询时返回文档中所有键值， 只需省略该参数即可（默认省略）。具体用法见下面补充。<br><br><br># 如果需要以易读的方式来读取数据，可以使用 pretty() 方法。pretty() 方法以格式化的方式来显示所有文档。<br>db.tothe.find().pretty()<br><br># 除了 find() 方法之外，还有一个 findOne() 方法，它只返回# 除了 find() 方法之外，还有一个 findOne() 方法，它只返回所有一个 文 档 。<br></code></pre></div></td></tr></table></figure>

<blockquote>
<p>projection参数补充</p>
</blockquote>
<ul>
<li>若不指定，则默认返回所有键，指定有两种模式。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql">db.tothe.find(query, &#123;title: 1, by: 1&#125;) # inclusion模式 指定返回的键，不返回其他键<br>db.tothe.find(query, &#123;title: 0, by: 0&#125;) # exclusion模式 指定不返回的键,返回其他键<br><br># _id 键默认返回，需要主动指定 _id:<span class="hljs-number">0</span> 才会隐藏<br></code></pre></div></td></tr></table></figure>
<p><strong>两种模式不可混用（因为这样的话无法推断其他键是否应返回）。即：db.tothe.find(query, {title: 1, by: 0})  这是错误的。</strong></p>
<ul>
<li>只能全1或全0，除了在inclusion模式时可以指定_id为0。db.collection.find(query, {_id:0, title: 1, by: 1})。</li>
</ul>
<blockquote>
<ol start="2">
<li>AND 条件</li>
</ol>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql">db.tothe.find(&#123;key1:value1, key2:value2&#125;).pretty()<br></code></pre></div></td></tr></table></figure>

<blockquote>
<ol start="3">
<li>OR 条件</li>
</ol>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql">db.tothe.find(<br>   &#123;<br>      $<span class="hljs-keyword">or</span>: [<br>         &#123;key1: value1&#125;, &#123;key2:value2&#125;<br>      ]<br>   &#125;<br>).pretty()<br></code></pre></div></td></tr></table></figure>

<blockquote>
<ol start="4">
<li>AND 和 OR 联合使用</li>
</ol>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs sql"># 类似 <span class="hljs-keyword">where</span> likes<span class="hljs-operator">&gt;</span><span class="hljs-number">50</span> <span class="hljs-keyword">AND</span> (<span class="hljs-keyword">by</span> <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;abc&#x27;</span> <span class="hljs-keyword">OR</span> title <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;MongoDB&#x27;</span>)<br><br>db.tothe.find(&#123;&quot;likes&quot;: &#123;$gt:50&#125;, $or: [&#123;&quot;by&quot;: &quot;abc&quot;&#125;,&#123;&quot;title&quot;: &quot;MongoDB&quot;&#125;]&#125;).pretty()<br></code></pre></div></td></tr></table></figure>












            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/MongoDB/">MongoDB</a>
                    
                  </div>
                
                
              </div>
              <!-- 
                <p class="note note-warning">
                  
                    本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！
                  
                </p>
               -->
              <p class="note note-warning">
                <strong>本文作者: </strong><a href="/">墨水记忆</a> <br>
                <strong>本文链接: </strong><a href="https://tothefor.com/DragonOne/160011744.html">https://tothefor.com/DragonOne/160011744.html</a> <br>
                <strong>版权声明: </strong>本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！
                   </p>
                   
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/DragonOne/1223048315.html">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Win10联想黑苹果Mac使用快捷键</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/DragonOne/2403181932.html">
                        <span class="hidden-mobile">数学建模-Matlab学习笔记（五）</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
              <!-- Comments -->
              <article class="comments" id="comments">
                
                  
                
                
  <div id="vcomments"></div>
  <script type="text/javascript">
    Fluid.utils.waitElementVisible('vcomments', function() {
      Fluid.utils.createScript('https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js', function () {
        new Valine({
          el: "#vcomments",
          app_id: "jx7bocft2eNXc79VRkkkNmhT-gzGzoHsz",
          app_key: "tL3DrseUcom3imP7y6HAnTfh",
          placeholder: "无需登录，匿名评论。  \n客官，来说点什么吧！(*╹▽╹*)",
          path: window.location.pathname,
          avatar: "retro",
          meta: ["nick","mail"],
          pageSize: "10",
          lang: "zh-CN",
          highlight: true,
          recordIP: false,
          serverURLs: "",
        });
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the
    <a target="_blank" href="https://valine.js.org" rel="nofollow noopener noopener">comments powered by Valine.</a>
  </noscript>


              </article>
            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;TOC</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->

  <div class="col-lg-7 mx-auto nopadding-x-md">
    <div class="container custom post-custom mx-auto">
      <img src="https://img-blog.csdnimg.cn/19499a592ed54c44a65f3913367ee966.png" srcset="/img/loading.gif" class="rounded mx-auto d-block mt-5" style="width:150px; height:150px;">   </br>  <p align="center">	(*╹▽╹*)ﾞ您的鼓励是我最大的动力。ヾ(◍°∇°◍)ﾉ</p>
    </div>
  </div>


    

    
      <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="javascript:" rel="nofollow noopener"><span>墨水记忆</span></a> <i class="iconfont icon-love"></i> <a href="javascript:" rel="nofollow noopener"><span>DragonOne</span></a> <div> <span id="timeDate">载入天数...</span> <span id="times">载入时分秒...</span> <script src="/js/duration.js"></script> </div> 
  </div>
  
  <div class="statistics">
    
    

    
      
        <!-- 不蒜子统计PV -->
        <span id="busuanzi_container_site_pv" style="display: none">
            总访问量 
            <span id="busuanzi_value_site_pv"></span>
             次
          </span>
      
      
        <!-- 不蒜子统计UV -->
        <span id="busuanzi_container_site_uv" style="display: none">
            总访客数 
            <span id="busuanzi_value_site_uv"></span>
             人
          </span>
      
    
  </div>


  
  <!-- 备案信息 -->
  <div class="beian">
    <span>
      <a href="javascript:" rel="nofollow noopener">
        最好的记忆不如最淡的墨水
      </a>
    </span>
    
  </div>


  
</footer>

<!-- SCRIPTS -->

  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/debouncer.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/lazyload.js" ></script>
  



  



  <script  src="https://cdn.jsdelivr.net/npm/tocbot@4.12.0/dist/tocbot.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.0/anchor.min.js" ></script>



  <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js" ></script>



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>


  <script defer src="/js/leancloud.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    (function () {
      var path = "/local-search.xml";
      $('#local-search-input').on('click', function() {
        searchFunc(path, 'local-search-input', 'local-search-result');
      });
      $('#modalSearch').on('shown.bs.modal', function() {
        $('#local-search-input').focus();
      });
    })()
  </script>












  
    <!-- Baidu Analytics -->
    <script defer>
      var _hmt = _hmt || [];
      (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?952d55c20fecac468ce267fb5ef10df9";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
      })();
    </script>
  

  

  

  

  

  





<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>


<!-- 雪花特效 -->
<!-- <script type="text/javascript" src="\js\snow.js"></script> -->
<!--单击显示文字-->
<script type="text/javascript" src="/js/click_show_text.js"></script>
<canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;" ></canvas> 
<script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script> 
<script type="text/javascript" src="/js/fireworks.js"></script>
<!-- hexo injector body_end start --><script src="/js/backgroundize.js"></script>
  <link defer rel="stylesheet" href="/styles/backgroundize.css" />
  <!-- hexo injector body_end end --></body>
</html>
